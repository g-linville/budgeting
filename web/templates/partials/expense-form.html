{{ define "expense-form" }}
<form hx-post="/expenses"
      hx-target="#recent-transactions"
      hx-swap="outerHTML"
      hx-on::after-request="if(event.detail.successful) this.reset()"
      class="expense-form">

    <div class="form-group">
        <label for="expense-name">Name *</label>
        <input type="text"
               id="expense-name"
               name="name"
               required
               maxlength="255"
               placeholder="e.g., Groceries">
        <span class="field-error" id="expense-name-error"></span>
    </div>

    <div class="form-group">
        <label for="expense-amount">Amount *</label>
        <input type="text"
               id="expense-amount"
               name="amount"
               required
               placeholder="e.g., 12.34">
        <span class="field-error" id="expense-amount-error"></span>
    </div>

    <div class="form-group">
        <label for="expense-category">Category</label>
        <select id="expense-category" name="category_id">
            <option value="">Uncategorized</option>
            {{ range .Categories }}
            <option value="{{ .ID }}">{{ .Name }}</option>
            {{ end }}
        </select>
    </div>

    <div class="form-group">
        <label for="expense-date">Date</label>
        <input type="date"
               id="expense-date"
               name="expense_date"
               value="{{ .CurrentYear }}-{{ printf "%02d" .CurrentMonth }}-{{ printf "%02d" 1 }}">
    </div>

    <div class="form-group">
        <label for="expense-notes">Notes</label>
        <textarea id="expense-notes"
                  name="notes"
                  rows="2"
                  placeholder="Optional notes"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Add Expense</button>
</form>
{{ end }}
